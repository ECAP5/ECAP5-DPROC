\vspace{1em}
\scalebox{0.85}{
\begin{tikzpicture}[scale=1.25, draw=gray, inner sep=0, outer sep=0]
  \node[rectangle, draw=white,
    minimum height = 5cm,
    minimum width = 2cm] (back) at (0, 0) {};
  \node[rectangle, draw=black,
    anchor=south,
    align=center,
    minimum height = 4.5cm,
    minimum width = 2.5cm,
    fill = gray!20] (mem) at (back.south) {Memory\\read};
  \node[rectangle, draw=black,
    align=center,
    anchor=north east,
    minimum height = 0.75cm,
    minimum width = 2cm,
    fill = blue!20!gray!20] (pc) at ([xshift=-1cm]mem.north west) {pc};
  \node[rectangle, draw=black,
    align=center,
    anchor=south east,
    minimum height = 3cm,
    minimum width = 2cm,
    fill = gray!20] (jmp) at ([xshift=-1cm]mem.south west) {Jump \\ logic};

  \node[dashed, draw=black, align=center, inner sep=1cm, fit=(jmp) (pc) (mem) (back)] (border) {};
  \node[anchor=north west, inner sep=0.25cm] (border-text) at (border.north west) {IFM};

  \node (cross-pc-mem) at (pc.east -| mem.west) {};
  \draw[->] (pc.east) -- (cross-pc-mem.center);

  \draw[->] (jmp.north) -- (pc.south);

  \node (rport1) at (mem.east) {};
  \draw[<-] ([xshift=1.5cm]rport1.center) node[right=0.2cm, anchor=west]{\footnotesize instr\_o[31:0]} -- (rport1.center);

  \node(uport1) at (mem.north) {};
  \draw[<-] ([yshift=2cm]uport1.center) node[above=0.2cm, anchor=south]{\footnotesize Wishbone} -- (uport1.center);

  \node (lport2) at ([yshift=0.4cm]jmp.west) {};
  \node (lport1) at ([yshift=0.4cm]lport2.center) {};
  \node (lport3) at ([yshift=-0.4cm]jmp.west) {};
  \node (lport4) at ([yshift=-0.4cm]lport3.center) {};

  \draw[->] ([xshift=-1.5cm]lport1.center) node[left=0.2cm, anchor=east]{\footnotesize irq\_i} -- (lport1.center);
  \draw[->] ([xshift=-1.5cm]lport2.center) node[left=0.2cm, anchor=east]{\footnotesize drq\_i} -- (lport2.center);
  \draw[->] ([xshift=-1.5cm]lport3.center) node[left=0.2cm, anchor=east]{\footnotesize branch\_i} -- (lport3.center);
  \draw[->] ([xshift=-1.5cm]lport4.center) node[left=0.2cm, anchor=east]{\footnotesize boffset\_i} -- (lport4.center);

  \node (clk) at ([yshift=-0.9cm]border.north west) {};
  \draw[->] ([xshift=-1.5cm]lport3.center |- clk.center) node[left=0.2cm, anchor=east]{\small clk\_i} -- (clk.center);
  % clk triangle
  \draw[-, dashed, draw=black] ([yshift=0.25cm]clk.center) -- ([xshift=0.25cm]clk.center) -- ([yshift=-0.25cm]clk.center);

  \node (rst) at (pc.west) {};
  \draw[->] ([xshift=-1.5cm]rst.center) node[left=0.2cm, anchor=east]{\small rst\_i} -- (rst.center);
\end{tikzpicture}
}
