\vspace{1em}
\scalebox{0.85}{
\begin{tikzpicture}[scale=1.25, draw=gray, inner sep=0, outer sep=0]
  \node[rectangle, draw=white,
    align=center,
    minimum height = 4.75cm,
    minimum width = 4cm,
    fill = white] (back) at (6, 2.5) {Block RAM \\ \small DP16KD};
  \node[rectangle, draw=black,
    align=center,
    anchor=south,
    minimum height = 4cm,
    minimum width = 4cm,
    fill = blue!20!gray!20] (BRAM) at (back.south) {Block RAM \\ \small DP16KD};

  \node[rectangle, draw=black,
    align=center,
    anchor=east,
    minimum height = 4cm,
    minimum width = 1.5cm,
    fill = gray!20] (glue1) at ([xshift=-0.5cm]BRAM.west) {};
  \node[rotate=90] (glue1text) at (glue1.center) {Read logic};

  \node[rectangle, draw=black,
    align=center,
    anchor=west,
    minimum height = 4cm,
    minimum width = 1.5cm,
    fill = gray!20] (glue2) at ([xshift=0.5cm]BRAM.east) {};
  \node[rotate=90] (glue2text) at (glue2.center) {Write logic};

  \node[dashed, draw=black, align=center, inner sep=1cm, fit=(BRAM) (back) (glue1) (glue2)] (border) {};
  \node[anchor=north west, inner sep=0.25cm] (border-text) at (border.north west) {IFM};

  \node (lport2) at ([yshift=0.5cm]glue1.west) {};
  \node (lport1) at ([yshift=0.5cm]lport2.center) {};
  \draw[->] ([xshift=-1.5cm]lport1.center) node[left=0.2cm, anchor=east]{\footnotesize raddr1\_i[4:0]} -- (lport1.center);
  \draw[<-] ([xshift=-1.5cm]lport2.center) node[left=0.2cm, anchor=east]{\footnotesize rdata1\_o[31:0]} -- (lport2.center);

  \node (lport3) at ([yshift=-0.5cm]glue1.west) {};
  \node (lport4) at ([yshift=-0.5cm]lport3.west) {};
  \draw[->] ([xshift=-1.5cm]lport3.center) node[left=0.2cm, anchor=east]{\footnotesize raddr2\_i[4:0]} -- (lport3.center);
  \draw[<-] ([xshift=-1.5cm]lport4.center) node[left=0.2cm, anchor=east]{\footnotesize rdata2\_o[31:0]} -- (lport4.center);

  \node (rport2) at (glue2.east) {};
  \node (rport1) at ([yshift=0.5cm]rport2.center) {};
  \node (rport3) at ([yshift=-0.5cm]rport2.center) {};
  \draw[->] ([xshift=1.5cm]rport1.center) node[right=0.2cm, anchor=west]{\footnotesize waddr\_i[4:0]} -- (rport1.center);
  \draw[->] ([xshift=1.5cm]rport2.center) node[right=0.2cm, anchor=west]{\footnotesize write\_i} -- (rport2.center);
  \draw[->] ([xshift=1.5cm]rport3.center) node[right=0.2cm, anchor=west]{\footnotesize wdata\_i[31:0]} -- (rport3.center);

  \node (clk) at ([yshift=-1cm]border.north west) {};
  \draw[->] ([xshift=-1.5cm]lport3.center |- clk.center) node[left=0.2cm, anchor=east]{\small clk\_i} -- (clk.center);
  % clk triangle
  \draw[-, dashed, draw=black] ([yshift=0.25cm]clk.center) -- ([xshift=0.25cm]clk.center) -- ([yshift=-0.25cm]clk.center);

  \draw[<->] (glue1.east) -- (BRAM.west);
  \draw[<->] (glue2.west) -- (BRAM.east);
\end{tikzpicture}
}
